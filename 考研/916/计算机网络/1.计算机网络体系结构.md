# 计算机网络体系结构

## 计算机网络概述

### 计算机网络的概念与功能

- 概念：计算机网络是一个将分散的、具有独立功能的**计算机系统**，通过**通信设备**与**线路**连接起来，由功能完善的**软件**实现**资源共享**和**信息传递**系统。（计算机网络是**互连**的、**自洽**的计算机集合。**互连**：通过通信链路互联互通。**自治**：无主从关系。）

- 功能：数据通信、资源共享、分布式处理、提高可靠性、负载均衡、电子化办公与服务、远程教育、娱乐等。

### 计算机网络的组成

- 按组成部分分：硬件、软件、协议（一系列规则和约定的集合）
- 按工作方式分：边缘部分、核心部分
- 按功能组成分：通信子网（OSI下三层）、资源子网（OSI上三层）

### 计算机网络的分类

- 按分布范围分：广域网（WAN）、城域网（MAN）、局域网（LAN）、个人区域网（PAN）
- 按使用者分：公用网、专用网
- 按交换技术分：电路交换、报文交换、分组交换
- 按拓扑结构分：总线型、星型、环型、网状型
- 按传输技术分：广播室网络（共享公共通信信道）、点对点网络（使用**分组存储转发**和**路由选择**机制）

### 计算机网络的标准化工作及相关组织

- 标准的分类：法定标准（OSI）、事实标准（TCP/IP）
- RFC成为正式标准的阶段：因特网草案$\to$建议标准$\to$草案标准$\to$因特网标准
- 相关组织：国际标准化组织（ISO）、国际电信联盟（ITU）、电气电子工程师学会（IEEE）、Internet工程任务组（IETF）

### 计算机网络的性能指标

- **速率**，即**数据率**或称**数据传输率**或**比特率**，连接到计算机网络上的**主机**在数字信道上传送数据的速率。单位：b/s、kb/s、Mb/s、Gb/s、Tb/s。
- **带宽**，用来表示网络的通信线路传送数据的能力，通常是指单位时间内从网络中的某一点到另一点所能通过的**最高数据率**。就是网络设备所支持的最高速度。单位：b/s、kb/s、Mb/s、Gb/s。
- **吞吐量**，表示在**单位时间**内通过**某个网络（或信道、接口）**的数据量。吞吐量受网络的带宽或网络的额定速率的限制。单位：b/s、kb/s、Mb/s。
- **时延**，指数据（报文/分组/比特流）从网络（或链路）的一段传送到另一端所需的时间。也叫**延迟**或**迟延**。单位是s。分为发送时延（传输时延）=分组长度/信道宽度、传播时延=信道长度/电磁波在信道上的传播速率、排队时延、处理时延。
- **时延带宽积**，指发送端发送的第一个比特即将到达终点时，发送端已经发送了多少个比特，因此又称**以比特为单位的链路长度**，即时延带宽积=传播时延$\times$信道带宽
- **往返时延RTT**，从发送方发送数据开始，到发送方收到接收方的确认（接收方收到数据后立即发送确认），总共经历的时延。
- **利用率**，分为**信道利用率**=有数据通过的时间/（有+无）数据通过的时间；和**网络利用率**=信道利用率加权平均值。

## 计算机网络体系结构与参考模型

### 计算机网络分层结构

#### 为什么分层

两个系统中实体间的通讯是一个很复杂的过程，为了降低协议设计和调试过程的复杂性，也为了便于对网络进行研究、实现和维护，促进标准化工作，通常对计算机网络的体系结构以分层的方式进行建模。

#### 分层基本原则

1. 每层之间相互**独立**，每层只实现一种相互独立的功能。

2. 每层之间**界面自然清晰**，易于理解，相互交流尽可能少。

3. 结构上可分割开。每层都采用**最合适的技术**来实现。

4. 保持**下层**对**上层**的独立性，上层单向使用下层提供的服务。

5. 整个分层结构应该能促进标准化工作。

#### 名词解释

- 实体：第n层中的活动元素称为**n层实体**。同一层的实体叫**对等实体**。
- 协议：为进行网络中的**对等实体**数据交换而建立的规则、标准或约定称为网络协议。由语法、语义和同步组成。语法：规定传输数据的格式；语义：规定所要完成的功能；同步：规定各种操作的顺序。
- 接口（访问服务点SAP）：上层使用下层服务的入口。
- 服务：下层为相邻上层提供的功能调用。
- SDU服务数据单元：为完成用户所要求的功能而应传送的数据。
- PCI协议控制信息：控制协议操作的信息。
- PDU协议数据单元：对等层次之间传送的数据单位。

#### 概念总结

- 网络体系结构是从**功能**上描述计算机网络结构。
- 计算机网络结构简称网络体系结构是**分层结构**。
- 每层遵循某个/些**网络协议**已完成本层功能。
- **计算机网络体系结构**是计算机网络的**各层及其协议**的集合。
- 第n层在向第n+1层提供服务时，此服务不仅包含第n层的功能，还包含由下层服务提供的服务。
- 仅仅在**相邻层间有接口**，且所提供服务的具体实现细节上对上一层完全屏蔽。
- 体系结构是**抽象**的，而实现是指能运行的一些软件和硬件。

### ISO/OSI参考模型和TCP/IP模型

#### OSI参考模型

- 应用层：所有能和用户交互产生网络流量的程序
  - 应用层服务：文件传输（FTP）、电子邮件（SMTP）、万维网（HTTP）
- 表示层：用于处理在两个通信系统中交换信息的表示方式（语法和语义）
  - 功能一：数据格式交换
  - 功能二：数据加密解密
  - 功能三：数据压缩和恢复
  - 主要协议：JPEG、ASCII
- 会话层：向表示层实体/用户进程**建立连接**并在连接上**有序**的**传输**数据
  - 功能一：建立、管理、终止会话
  - 功能二：使用校验点可使会话在通信失效时从**校验点/同步点**继续恢复通信，实现数据同步。适用于传输大文件
  - 主要协议：ADSP、ASP
- 传输层：负责主机中**两个进程**的通信，即**端到端**的通信。传输单位是报文段或用户数据报
  - 功能一：可靠传输、不可靠传输
  - 功能二：差错控制
  - 功能三：流量控制
  - 功能四：复用分用（复用：多个应用层进程可同时使用下面传输层的服务，分用：传输层把收到的信息分别交付给上面应用层中相应的进程。）
  - 主要协议：TCP、UDP
- 网络层：主要任务是把**分组**从源端传到目的端，为分组交换网上的不同主机提供通信服务。传输单位是**数据报**
  - 功能一：路由选择
  - 功能二：流量控制
  - 功能三：差错控制
  - 功能四：拥塞控制
  - 主要协议：IP、IPX、ICMP、IGMP、APR、RAPR、OSPF
- 数据链路层：主要任务是把网络层传下来的数据报**组装成帧**
  - 功能一：成帧（定义帧的开始和结束）
  - 功能二：差错控制 帧错+位错
  - 功能三：流量控制
  - 功能四：访问（接入）控制 控制对信道的访问
  - 主要协议：SDLC、HDLC、PPP、STP
- 物理层：主要任务是在**物理媒体**上实现比特流的**透明传输**，传输单位**比特**（透明传输：指不管所传数据是什么样的比特组合，都应当能够在链路上传送。）
  - 功能一：定义接口特性
  - 功能二·：定义传输模式 单工、半双工、双工
  - 功能三：定义传输速率
  - 功能四：比特同步
  - 主要协议：Rj45、802.3

#### TCP/IP参考模型

- 应用层：HTTP、FTP、DNS
- 传输层：TCP、UDP
- 网际层：IP
- 网络接口层：Ethernet、ATM、Frame Relay

#### 5层参考模型

综合了OSI和TCP/IP的优点

- 应用层：支持各种网络应用 FTP、SMTP、HTTP
- 传输层：进程-进程的数据传输 TCP、UDP
- 网络层：源主机到目的主机的数据分组路由与转发 IP、ICMP、OSPF
- 数据链路层：把网络层传下来的数据报组装成帧 Ethernet、PPP
- 物理层：比特传输

